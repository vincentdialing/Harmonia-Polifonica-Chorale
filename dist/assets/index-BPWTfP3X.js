import{a}from"./vendor-core-DQTrsXa-.js";var u={},f="@vercel/speed-insights",l="1.3.1",v=()=>{window.si||(window.si=function(...r){(window.siq=window.siq||[]).push(r)})};function w(){return typeof window<"u"}function h(){try{const e="production"}catch{}return"production"}function o(){return h()==="development"}function R(e,r){if(!e||!r)return e;let t=e;try{const n=Object.entries(r);for(const[i,s]of n)if(!Array.isArray(s)){const c=d(s);c.test(t)&&(t=t.replace(c,`/[${i}]`))}for(const[i,s]of n)if(Array.isArray(s)){const c=d(s.join("/"));c.test(t)&&(t=t.replace(c,`/[...${i}]`))}return t}catch{return e}}function d(e){return new RegExp(`/${g(e)}(?=[/?#]|$)`)}function g(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function m(e){return e.scriptSrc?e.scriptSrc:o()?"https://va.vercel-scripts.com/v1/speed-insights/script.debug.js":e.dsn?"https://va.vercel-scripts.com/v1/speed-insights/script.js":e.basePath?`${e.basePath}/speed-insights/script.js`:"/_vercel/speed-insights/script.js"}function b(e={}){var r;if(!w()||e.route===null)return null;v();const t=m(e);if(document.head.querySelector(`script[src*="${t}"]`))return null;e.beforeSend&&((r=window.si)==null||r.call(window,"beforeSend",e.beforeSend));const n=document.createElement("script");return n.src=t,n.defer=!0,n.dataset.sdkn=f+(e.framework?`/${e.framework}`:""),n.dataset.sdkv=l,e.sampleRate&&(n.dataset.sampleRate=e.sampleRate.toString()),e.route&&(n.dataset.route=e.route),e.endpoint?n.dataset.endpoint=e.endpoint:e.basePath&&(n.dataset.endpoint=`${e.basePath}/speed-insights/vitals`),e.dsn&&(n.dataset.dsn=e.dsn),o()&&e.debug===!1&&(n.dataset.debug="false"),n.onerror=()=>{console.log(`[Vercel Speed Insights] Failed to load script from ${t}. Please check if any content blockers are enabled and try again.`)},document.head.appendChild(n),{setRoute:i=>{n.dataset.route=i??void 0}}}function S(){if(!(typeof process>"u"||typeof u>"u"))return u.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function E(e){a.useEffect(()=>{var t;e.beforeSend&&((t=window.si)==null||t.call(window,"beforeSend",e.beforeSend))},[e.beforeSend]);const r=a.useRef(null);return a.useEffect(()=>{if(r.current)e.route&&r.current(e.route);else{const t=b({framework:e.framework??"react",basePath:e.basePath??S(),...e});t&&(r.current=t.setRoute)}},[e.route]),null}export{E as SpeedInsights,R as computeRoute};
